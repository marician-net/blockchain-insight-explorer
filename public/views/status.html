<section data-ng-controller="StatusController">
  <div class="page-header">
    <h1>
      Application Status 
    </h1>
  </div>
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <h2>Bitcoin node information</h2>
      <table class="table table-striped" data-ng-init="getStatus('Info')">
        <tbody>
        <tr data-ng-show="!info &amp;&amp; !infoError">
          <td colspan="2" class="text-center">Loading...
        <tr data-ng-show="infoError">
          <td colspan="2" class="text-danger">{{infoError}}
        <tr>
          <td>Version</td>
          <td>{{info.version}}</td>
        </tr>
        <tr>
          <td>Protocol version</td>
          <td>{{info.protocolversion}}</td>
        </tr>
        <tr>
          <td>Wallet version</td>
          <td>{{info.walletversion}}</td>
        </tr>
        <tr>
          <td>Balance (BTC)</td>
          <td>{{info.balance}}</td>
        </tr>
        <tr>
          <td>Blocks</td>
          <td><a href="/#!/block-index/{{info.blocks}}">{{info.blocks}}</a></td>
        </tr>
        <tr>
          <td>Time Offset</td>
          <td>{{info.timeoffset}}</td>
        </tr>
        <tr>
          <td>Connections to other nodes</td>
          <td>{{info.connections}}</td>
        </tr>
        <tr>
          <td>Proxy setting</td>
          <td>{{info.proxy}}</td>
        </tr>
        <tr>
          <td>Mining Difficulty</td>
          <td>{{info.difficulty}}</td>
        </tr>
        <tr>
          <td>Testnet</td>
          <td>{{info.testnet}}</td>
        </tr>
        <tr>
          <td>Keypool Oldest Date</td>
          <td>{{info.keypoololdest*1000 | date:'medium' }}</td>
        </tr>
        <tr>
          <td>Keypool Size</td>
          <td>{{info.keypoolsize}}</td>
        </tr>
        <tr>
          <td>Default Transaction Fee (BTC)</td>
          <td>{{info.paytxfee}}</td>
        </tr>
        <tr>
          <td>Info Errors</td>
          <td>{{info.infoErrors}}</td>
        </tr>
        </tbody>
      </table>
      
      <h2>Sync Status</h2>
      <table class="table table-striped" data-ng-init="getSync()">
        <tbody>
        <tr data-ng-show="syncError">  
          <td colspan="2"> <span class="text-danger"> {{ syncError }} </span>
        <tr data-ng-show="sync.error">  
          <td colspan="2"> <span class="text-danger"> {{ sync.err }} </span>
        </tr>
        <tr>
          <td>Sync Progress</td>
          <td> 
          <div class="progress">
            <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: {{(100 * sync.syncedBlocks/sync.blocksToSync)| number:2}}%">
                <span>{{(100 * sync.syncedBlocks/sync.blocksToSync)| number:2}}% Complete</span>
              </div>
          </div>
        </tr>
        <tr>
          <td>Blocks to Sync</td>
          <td>{{sync.blocksToSync}}</td>
        </tr>
        <tr>
          <td>Synced Blocks</td>
          <td>{{sync.syncedBlocks}}</td>
        </tr>
        <tr>
          <td>Start</td>
          <td>
            <a href="/#!/block/{{sync.start}}">{{sync.start}}</a>
            <span data-ng-show="sync.isStartGenesis"> (genesisBlock)</span>
          </td>
        </tr>
        <tr>
          <td>End</td>
          <td>
            <a href="/#!/block/{{sync.end}}">{{sync.end}}</a>
            <span data-ng-show="sync.isEndGenesis"> (genesisBlock)</span>
          </td>
        </tr>
        <tr>
          <td>Sync properties</td>
          <td>
            <ul>  
              <li  data-ng-show="sync.upToExisting"> <span> Stops at existing block </span>
              <li>
                <span data-ng-show="sync.scanningBackward"> Backward Scan</span>
                <span data-ng-hide="sync.scanningBackward"> Forward Scan</span>
            </ul>  
          </td>
        </tr>
        </tbody>
      </table>
    
      <h2>Transaction Output Set Information</h2>
      <table class="table table-striped" data-ng-init="getStatus('TxOutSetInfo')">
        <tbody>
        <tr data-ng-show="!txoutsetinfo &amp;&amp; !infoError">
          <td colspan="2" class="text-center">Loading...</td>
        </tr>
        <tr data-ng-show="infoError">
          <td colspan="2" class="text-danger">{{infoError}}</td>
        </tr>
        <tr>
          <td>Height</td>
          <td><a href="/#!/block-index/{{txoutsetinfo.height}}">{{txoutsetinfo.height}}</a></td>
        </tr>
        <tr>
          <td>Best Block</td>
          <td><a href="/#!/block/{{txoutsetinfo.bestblock}}">{{txoutsetinfo.bestblock}}</a></td>
        </tr>
        <tr>
          <td>Transactions</td>
          <td>{{txoutsetinfo.transactions}}</td>
        </tr>
        <tr>
          <td>Transaction Outputs</td>
          <td>{{txoutsetinfo.txouts}}</td>
        </tr>
        <tr>
          <td>Bytes Serialized</td>
          <td>{{txoutsetinfo.bytes_serialized}}</td>
        </tr>
        <tr>
          <td>Hash Serialized</td>
          <td>{{txoutsetinfo.hash_serialized}}</td>
        </tr>
        <tr>
          <td>Total Amount</td>
          <td>{{txoutsetinfo.total_amount}}</td>
        </tr>
        </tbody>
      </table>

      <h2>Difficulty</h2>
      <table class="table table-striped" data-ng-init="getStatus('Difficulty')">
        <tbody>
        <tr data-ng-show="!difficulty &amp;&amp; !infoError">
          <td colspan="2" class="text-center">Loading...</td>
        </tr>
        <tr data-ng-show="infoError">
          <td colspan="2" class="text-danger">{{infoError}}</td>
        </tr>
 
        <tr>
          <td>Mining Difficulty</td>
          <td>{{difficulty}}</td>
        </tr>
        </tbody>
      </table>
      
      <h2>Last Block</h2>
      <table class="table table-striped" data-ng-init="getStatus('LastBlockHash')">
        <tbody>
        <tr data-ng-show="!lastblockhash &amp;&amp; !infoError">
          <td colspan="2" class="text-center">Loading...</td>
        </tr>
        <tr data-ng-show="infoError">
          <td colspan="2" class="text-danger">{{infoError}}</td>
        </tr>
        <tr>
          <td>Last block hash</td>
          <td><a href="/#!/block/{{lastblockhash}}">{{lastblockhash}}</a></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

